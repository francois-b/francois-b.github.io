<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 680" font-family="Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif">
  <defs>
    <filter id="shadow" x="-2%" y="-2%" width="104%" height="104%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    <marker id="arrowhead" markerWidth="6" markerHeight="5" refX="5" refY="2.5" orient="auto">
      <polygon points="0 0, 6 2.5, 0 5" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="680" fill="#0f172a"/>

  <!-- Main container -->
  <rect x="20" y="20" width="760" height="645" rx="12" fill="#1e293b" stroke="#334155" stroke-width="2"/>

  <!-- API Gateway -->
  <rect x="280" y="40" width="240" height="45" rx="8" fill="#6366f1" filter="url(#shadow)"/>
  <text x="400" y="68" font-size="14" font-weight="600" fill="white" text-anchor="middle">API Gateway</text>

  <!-- Arrow from API Gateway down -->
  <line x1="400" y1="85" x2="400" y2="110" stroke="#64748b" stroke-width="2"/>

  <!-- Horizontal line splitting to 3 lambdas -->
  <line x1="200" y1="110" x2="600" y2="110" stroke="#64748b" stroke-width="2"/>
  <line x1="200" y1="110" x2="200" y2="130" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="400" y1="110" x2="400" y2="130" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="600" y1="110" x2="600" y2="130" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Chat Lambda -->
  <rect x="130" y="140" width="140" height="50" rx="6" fill="#f59e0b" filter="url(#shadow)"/>
  <text x="200" y="162" font-size="13" font-weight="600" fill="white" text-anchor="middle">Chat</text>
  <text x="200" y="178" font-size="11" fill="white" text-anchor="middle">Lambda</text>

  <!-- Knowledge Lambda -->
  <rect x="330" y="140" width="140" height="50" rx="6" fill="#f59e0b" filter="url(#shadow)"/>
  <text x="400" y="162" font-size="13" font-weight="600" fill="white" text-anchor="middle">Knowledge</text>
  <text x="400" y="178" font-size="11" fill="white" text-anchor="middle">Lambda</text>

  <!-- Curation Lambda -->
  <rect x="530" y="140" width="140" height="50" rx="6" fill="#f59e0b" filter="url(#shadow)"/>
  <text x="600" y="162" font-size="13" font-weight="600" fill="white" text-anchor="middle">Curation</text>
  <text x="600" y="178" font-size="11" fill="white" text-anchor="middle">Lambda</text>

  <!-- Arrows down to VPC -->
  <line x1="200" y1="190" x2="200" y2="220" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="400" y1="190" x2="400" y2="220" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="600" y1="190" x2="600" y2="220" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- VPC Container -->
  <rect x="100" y="230" width="600" height="100" rx="8" fill="#334155" stroke="#60a5fa" stroke-width="2"/>
  <text x="120" y="255" font-size="12" font-weight="600" fill="#93c5fd">VPC</text>

  <!-- RDS Aurora -->
  <rect x="180" y="260" width="440" height="55" rx="6" fill="#3b82f6" filter="url(#shadow)"/>
  <text x="400" y="285" font-size="13" font-weight="600" fill="white" text-anchor="middle">RDS Aurora Serverless</text>
  <text x="400" y="303" font-size="11" fill="white" text-anchor="middle">PostgreSQL + pgvector</text>

  <!-- Row of services: DynamoDB, S3, Bedrock -->
  <rect x="60" y="360" width="130" height="55" rx="6" fill="#22c55e" filter="url(#shadow)"/>
  <text x="125" y="385" font-size="12" font-weight="600" fill="white" text-anchor="middle">DynamoDB</text>
  <text x="125" y="402" font-size="10" fill="white" text-anchor="middle">(conversations)</text>

  <rect x="335" y="360" width="130" height="55" rx="6" fill="#22c55e" filter="url(#shadow)"/>
  <text x="400" y="385" font-size="12" font-weight="600" fill="white" text-anchor="middle">S3</text>
  <text x="400" y="402" font-size="10" fill="white" text-anchor="middle">(documents)</text>

  <rect x="610" y="360" width="130" height="55" rx="6" fill="#22c55e" filter="url(#shadow)"/>
  <text x="675" y="385" font-size="12" font-weight="600" fill="white" text-anchor="middle">Bedrock</text>
  <text x="675" y="402" font-size="10" fill="white" text-anchor="middle">(embeddings)</text>

  <!-- Arrow from S3 down to Document Ingestion -->
  <line x1="400" y1="415" x2="400" y2="440" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Document Ingestion Lambda -->
  <rect x="335" y="450" width="130" height="50" rx="6" fill="#f59e0b" filter="url(#shadow)"/>
  <text x="400" y="472" font-size="12" font-weight="600" fill="white" text-anchor="middle">Document</text>
  <text x="400" y="488" font-size="11" fill="white" text-anchor="middle">Ingestion Lambda</text>

  <!-- EventBridge Scheduler -->
  <rect x="60" y="520" width="130" height="50" rx="6" fill="#8b5cf6" filter="url(#shadow)"/>
  <text x="125" y="542" font-size="12" font-weight="600" fill="white" text-anchor="middle">EventBridge</text>
  <text x="125" y="558" font-size="10" fill="white" text-anchor="middle">Scheduler</text>

  <!-- Arrow from EventBridge to Extraction Lambda -->
  <line x1="190" y1="545" x2="330" y2="545" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="260" y="538" font-size="10" fill="#94a3b8" text-anchor="middle">Nightly 2 AM</text>

  <!-- Extraction Lambda -->
  <rect x="335" y="520" width="130" height="50" rx="6" fill="#f59e0b" filter="url(#shadow)"/>
  <text x="400" y="542" font-size="12" font-weight="600" fill="white" text-anchor="middle">Extraction</text>
  <text x="400" y="558" font-size="11" fill="white" text-anchor="middle">Lambda</text>

  <!-- SNS Topics -->
  <rect x="60" y="590" width="130" height="50" rx="6" fill="#ec4899" filter="url(#shadow)"/>
  <text x="125" y="612" font-size="12" font-weight="600" fill="white" text-anchor="middle">SNS</text>
  <text x="125" y="628" font-size="10" fill="white" text-anchor="middle">Topics</text>

  <!-- Push Handler -->
  <rect x="335" y="590" width="130" height="50" rx="6" fill="#f59e0b" filter="url(#shadow)"/>
  <text x="400" y="612" font-size="12" font-weight="600" fill="white" text-anchor="middle">Push</text>
  <text x="400" y="628" font-size="11" fill="white" text-anchor="middle">Handler</text>

  <!-- Arrow from Push Handler to SNS -->
  <line x1="335" y1="615" x2="195" y2="615" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
</svg>
